---
import "../styles/style.css";
import Layout from "../layouts/layout.astro";
import AboutMe from "../components/Windows/AboutMe.astro";
import ContactMe from "../components/Windows/ContactMe.astro";
---

<script>
  import { moveWindow } from "../scripts/addMoveWindowHandler";
  import { createTaskBarButton } from "../scripts/createTaskbarButton";
  import { moveWindowToFront } from "../scripts/moveWidnowToFrontHandler";
  import { toggleWindow } from "../scripts/toggleWindow";
  // Getting All the Windows
  const windows = document.querySelectorAll(".window");
  windows.forEach((windowDiv) => {
    const windowDataAttr = windowDiv.getAttribute("data-window") ?? "";
    const windowName = windowDiv.getAttribute("data-title") ?? "";
    const windowIcon = windowDiv.getAttribute("data-icon") ?? "";
    // Making Windows Dragable
    moveWindow(windowDataAttr);
    // Move Window to Front on Click
    windowDiv.addEventListener("click", () => moveWindowToFront(windowDataAttr));
    // Adding Toggle to Close Button
    const closeButton = windowDiv.querySelector(".close-button");
    if (closeButton) {
      closeButton.addEventListener("click", (e) => toggleWindow(windowDataAttr, true));
    }
    // Adding Toggle to Minimize Button
    const minimizeButton = windowDiv.querySelector(".minimize-button");
    if (minimizeButton) {
      minimizeButton.addEventListener("click", (e) => toggleWindow(windowDataAttr));
    }
    // Creating Taskbar Button
    createTaskBarButton(windowName, windowIcon, windowDataAttr);
  });
</script>

<Layout>
  <ContactMe />
  <AboutMe />
</Layout>
